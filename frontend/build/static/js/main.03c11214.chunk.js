(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{66:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(28),s=n.n(a),r=n(9),i=n(13),l=n.n(i),o=n(17),d=n(4),u=n(8),j=n(2),b=(n(38),n(29)),h=n(30),m=n(31),O=n.n(m).a.create({baseURL:"https://webhooks.mongodb-realm.com/api/client/v2.0/app/restaurant-reviews-xbiex/service/restaurants/incoming_webhook/",headers:{"Content-type":"application/json"}}),v=new(function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return O.get("restaurants?page=".concat(e))}},{key:"get",value:function(e){return O.get("/restaurant?id=".concat(e))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return O.get("restaurants?".concat(t,"=").concat(e,"&page=").concat(n))}},{key:"createReview",value:function(e){return O.post("/review-new",e)}},{key:"updateReview",value:function(e){return O.put("/review-edit",e)}},{key:"deleteReview",value:function(e,t){return O.delete("/review-delete?id=".concat(e),{data:{user_id:t}})}},{key:"getCuisines",value:function(e){return O.get("/cuisines")}}]),e}()),x=n(0),p=function(e){var t="",n=!1;e.location.state&&e.location.state.currentReview&&(n=!0,t=e.location.state.currentReview.text);var a=Object(c.useState)(t),s=Object(d.a)(a,2),r=s[0],i=s[1],l=Object(c.useState)(!1),o=Object(d.a)(l,2),j=o[0],b=o[1];return Object(x.jsx)("div",{children:e.user?Object(x.jsx)("div",{className:"submit-form",children:j?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)(u.b,{to:"/restaurants/"+e.match.params.id,className:"btn btn-success",children:"Back to Restaurant"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{htmlFor:"description",children:[n?"Edit":"Create"," Review"]}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"text",required:!0,value:r,onChange:function(e){i(e.target.value)},name:"text"})]}),Object(x.jsx)("button",{onClick:function(){var t={text:r,name:e.user.name,user_id:e.user.id,restaurant_id:e.match.params.id};n?(t.review_id=e.location.state.currentReview._id,v.updateReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))):v.createReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Submit"})]})}):Object(x.jsx)("div",{children:"Please log in."})})},f=function(e){var t=Object(c.useState)({id:null,name:"",address:{},cuisine:"",reviews:[]}),n=Object(d.a)(t,2),a=n[0],s=n[1];Object(c.useEffect)((function(){var t;t=e.match.params.id,v.get(t).then((function(e){s(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[e.match.params.id]);return Object(x.jsx)("div",{children:a?Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:a.name}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Cuisine: "}),a.cuisine,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Address: "}),a.address.building," ",a.address.street,", ",a.address.zipcode]}),Object(x.jsx)(u.b,{to:"/restaurants/"+e.match.params.id+"/review",className:"btn btn-primary",children:"Add Review"}),Object(x.jsx)("h4",{children:" Reviews "}),Object(x.jsx)("div",{className:"row",children:a.reviews.length>0?a.reviews.map((function(t,n){return Object(x.jsx)("div",{className:"col-lg-4 pb-1",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{className:"card-text",children:[t.text,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"User: "}),t.name,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Date: "}),t.date]}),e.user&&e.user.id===t.user_id&&Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("a",{onClick:function(){return function(t,n){v.deleteReview(t,e.user.id).then((function(e){s((function(e){return e.reviews.splice(n,1),Object(r.a)({},e)}))})).catch((function(e){console.log(e)}))}(t._id,n)},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Delete"}),Object(x.jsx)(u.b,{to:{pathname:"/restaurants/"+e.match.params.id+"/review",state:{currentReview:t}},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Edit"})]})]})})},n)})):Object(x.jsx)("div",{className:"col-sm-4",children:Object(x.jsx)("p",{children:"No reviews yet."})})})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"No restaurant selected."})]})})},g=function(e){var t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(d.a)(r,2),l=i[0],o=i[1],j=Object(c.useState)(""),b=Object(d.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(""),p=Object(d.a)(O,2),f=p[0],g=p[1],N=Object(c.useState)(["All Cuisines"]),w=Object(d.a)(N,2),y=w[0],k=w[1];Object(c.useEffect)((function(){C(),R()}),[]);var C=function(){v.getAll().then((function(e){console.log(e.data),s(e.data.restaurants)})).catch((function(e){console.log(e)}))},R=function(){v.getCuisines().then((function(e){console.log(e.data),k(["All Cuisines"].concat(e.data))})).catch((function(e){console.log(e)}))},S=function(e,t){v.find(e,t).then((function(e){console.log(e.data),s(e.data.restaurants)})).catch((function(e){console.log(e)}))};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"row pb-1",children:[Object(x.jsxs)("div",{className:"input-group col-lg-4",children:[Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by name",value:l,onChange:function(e){var t=e.target.value;o(t)}}),Object(x.jsx)("div",{className:"input-group-append",children:Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){S(l,"name")},children:"Search"})})]}),Object(x.jsxs)("div",{className:"input-group col-lg-4",children:[Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by zip",value:h,onChange:function(e){var t=e.target.value;m(t)}}),Object(x.jsx)("div",{className:"input-group-append",children:Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){S(h,"zipcode")},children:"Search"})})]}),Object(x.jsxs)("div",{className:"input-group col-lg-4",children:[Object(x.jsx)("select",{onChange:function(e){var t=e.target.value;g(t)},children:y.map((function(e){return Object(x.jsxs)("option",{value:e,children:[" ",e.substr(0,20)," "]})}))}),Object(x.jsx)("div",{className:"input-group-append",children:Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){"All Cuisines"==f?C():S(f,"cuisine")},children:"Search"})})]})]}),Object(x.jsx)("div",{className:"row",children:a.map((function(e){var t="".concat(e.address.building," ").concat(e.address.street,", ").concat(e.address.zipcode);return Object(x.jsx)("div",{className:"col-lg-4 pb-1",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:e.name}),Object(x.jsxs)("p",{className:"card-text",children:[Object(x.jsx)("strong",{children:"Cuisine: "}),e.cuisine,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Address: "}),t]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)(u.b,{to:"/restaurants/"+e._id,className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"View Reviews"}),Object(x.jsx)("a",{target:"_blank",href:"https://www.google.com/maps/place/"+t,className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"View Map"})]})]})})})}))})]})},N=n(14),w=function(e){var t=Object(c.useState)({name:"",id:""}),n=Object(d.a)(t,2),a=n[0],s=n[1],i=function(e){var t=e.target,n=t.name,c=t.value;s(Object(r.a)(Object(r.a)({},a),{},Object(N.a)({},n,c)))};return Object(x.jsx)("div",{className:"submit-form",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"user",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,value:a.name,onChange:i,name:"name"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"id",children:"ID"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"id",required:!0,value:a.id,onChange:i,name:"id"})]}),Object(x.jsx)("button",{onClick:function(){e.login(a),e.history.push("/")},className:"btn btn-success",children:"Login"})]})})};var y=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:null,a(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(x.jsx)("a",{href:"/restaurants",className:"navbar-brand",children:"Restaurant Reviews"}),Object(x.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/restaurants",className:"nav-link",children:"Restaurants"})}),Object(x.jsx)("li",{className:"nav-item",children:n?Object(x.jsxs)("a",{onClick:i,className:"nav-link",style:{cursor:"pointer"},children:["Logout ",n.name]}):Object(x.jsx)(u.b,{to:"/login",className:"nav-link",children:"Login"})})]})]}),Object(x.jsx)("div",{className:"container mt-3",children:Object(x.jsxs)(j.c,{children:[Object(x.jsx)(j.a,{exact:!0,path:["/","/restaurants"],component:g}),Object(x.jsx)(j.a,{path:"/restaurants/:id/review",render:function(e){return Object(x.jsx)(p,Object(r.a)(Object(r.a)({},e),{},{user:n}))}}),Object(x.jsx)(j.a,{path:"/restaurants/:id",render:function(e){return Object(x.jsx)(f,Object(r.a)(Object(r.a)({},e),{},{user:n}))}}),Object(x.jsx)(j.a,{path:"/login",render:function(e){return Object(x.jsx)(w,Object(r.a)(Object(r.a)({},e),{},{login:s}))}})]})})]})};s.a.render(Object(x.jsx)(u.a,{children:Object(x.jsx)(y,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.03c11214.chunk.js.map